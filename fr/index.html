<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Assistance Random Nutrition</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body>
  <header>
    <div class="slider-container">
      <div class="language-menu">
        <a href="/fr/index.html">FR <img src="../images/french_flag.png" alt="Français" class="flag-icon"></a> |
        <a href="/en/index.html">EN <img src="../images/american_flag.png" alt="English" class="flag-icon"></a>
      </div>

      <div id="slider">
        <img src="../images/image1.jpg" alt="Application mobile 1">
        <img src="../images/image2.jpg" alt="Application mobile 2">
        <img src="../images/image3.jpg" alt="Application mobile 3">
        <img src="../images/image4.jpg" alt="Application mobile 4">
        <img src="../images/image5.jpg" alt="Application mobile 5">
      </div>
      <div class="dots">
        </div>
      <div class="header-text">
        <h1>Assistance & Documentation</h1>
        <p>Random Nutrition</p>
      </div>
    </div>
  </header>

  <nav class="fade-in">
    <a href="#presentation">Présentation</a>
    <a href="#fonctionnalites">Fonctionnalités</a>
    <a href="#pages">Pages de l'application</a>
    <a href="/fr/derniere_mise_a_jour">Dernière mise à jour</a>
    <a href="/fr/politique_de_confidentialite">Politique de confidentialité</a>
    <a href="#contact">Contact & Support</a>
  </nav>

  <section id="presentation" class="animate-on-scroll">
    <h2>Présentation de Random Nutrition</h2>
    <p>
      Random Nutrition est une application mobile qui génère des repas équilibrés de manière aléatoire tout en respectant des contraintes nutritionnelles prédéfinies.
      L'application produit des entrées, des plats, des fromages et des desserts en tenant compte des besoins en énergie, protéines, lipides, glucides et autres macronutriments.
    </p>
    <p>
      Elle offre également la possibilité d'ajouter ou d'exclure certains types d'aliments pour personnaliser les repas selon vos préférences et besoins.
    </p>
  </section>

  <section id="fonctionnalites" class="animate-on-scroll">
    <h2>Fonctionnalités principales</h2>
    <ul>
      <li>Génération de repas aléatoires respectant des limites nutritionnelles pour chaque type de mets (entrée, plat, fromage, dessert).</li>
      <li>Personnalisation des limites nutritionnelles (énergie, proportions de macronutriments).</li>
      <li>Gestion des quantités des aliments avec des fourchettes prédéfinies.</li>
      <li>Vérification automatique des contraintes nutritionnelles pour chaque repas généré.</li>
      <li>Respect des règles diététiques : chaque repas est équilibré et répond aux besoins journaliers en énergie, protéines, lipides et glucides.</li>
    </ul>
  </section>

  <section id="pages" class="animate-on-scroll">
    <h2>Pages de l'application</h2>

    <h3>Page d'accueil</h3>
    <p>
      L'utilisateur peut visualiser ses statistiques d'utilisation et découvrir quelques aliments au hasard.
    </p>

    <h3>Page Aliments</h3>
    <p>
      Cette page affiche deux listes :
    </p>
    <ul>
      <li>La liste des aliments par défaut.</li>
      <li>La liste des aliments personnalisables que l'utilisateur peut ajouter.</li>
    </ul>
    <p>
      En cliquant sur le bouton <strong>+</strong>, l'utilisateur est redirigé vers une page de création d'aliment personnalisé comprenant le nom, les catégories, les valeurs nutritionnelles, une description, etc.
      Chaque aliment de la liste est cliquable pour afficher un popup détaillant toutes ses informations.
    </p>

    <h3>Page Générer des repas</h3>
    <p>
      Sur cette page, l'utilisateur peut :
    </p>
    <ul>
      <li>Saisir les valeurs nutritionnelles souhaitées.</li>
      <li>Choisir le nombre de repas à générer.</li>
      <li>Paramétrer individuellement chaque repas en sélectionnant les mets et les catégories ou aliments désirés.</li>
      <li>Générer les repas en cliquant sur le bouton "Générer" après configuration.</li>
    </ul>
    <p>
      Un écran de chargement s'affiche avec un conseil, et une fois terminé, les repas générés s'affichent en détails avec la possibilité de les enregistrer individuellement ou en ensemble.
    </p>

    <h3>Page Repas & Ensembles de repas</h3>
    <p>
      Cette page présente deux listes :
    </p>
    <ul>
      <li>Les repas enregistrés.</li>
      <li>Les ensembles de repas enregistrés.</li>
    </ul>
    <p>
      Chaque élément est cliquable pour ouvrir un popup avec les détails du repas ou de l'ensemble. Seuls le nom et la couleur sont modifiables.
    </p>

    <h3>Page Options</h3>
    <p>
      L'utilisateur peut configurer diverses options de l'application pour personnaliser son expérience.
    </p>
  </section>

  <section id="contact" class="animate-on-scroll">
    <h2>Contact & Support</h2>
    <p>
      Pour toute question, suggestion ou problème, veuillez contacter notre équipe de support à l'adresse suivante :
    </p>
    <p>
      <strong>Email :</strong> <a class="mail-link" href="mailto:support@randomnutrition.fr">support@randomnutrition.fr</a>
    </p>
    <p>
      Vous pouvez également consulter cette page régulièrement pour des mises à jour, FAQ et conseils d'utilisation.
    </p>
  </section>

   <footer class="fade-in">
    <p>&copy; 2025 Random Nutrition - Tous droits réservés</p>
  </footer>

  <script>
    document.addEventListener("DOMContentLoaded", function() {

      // --- Logique du Carrousel / Slider ---
      let slideIndex = 0;
      const slider = document.getElementById("slider");
      const slides = document.querySelectorAll("#slider img");
      const dotsContainer = document.querySelector(".dots");
      let slideInterval;
      const slideDuration = 5000; // 5 secondes

      function createDots() {
        dotsContainer.innerHTML = ''; // Vider les anciens points
         if (!slides || slides.length <= 1) {
            dotsContainer.style.display = 'none'; // Cache les points si 0 ou 1 slide
            return;
         }
         dotsContainer.style.display = 'flex'; // Affiche les points si > 1 slide
        slides.forEach((_, i) => {
          const dot = document.createElement("span");
          dot.classList.add("dot");
          dot.setAttribute("onclick", `currentSlide(${i})`); // Attention: n-1 n'est plus nécessaire
          dotsContainer.appendChild(dot);
        });
      }

      function updateDots() {
          const dots = dotsContainer.querySelectorAll(".dot");
           if (!dots || dots.length === 0) return;
        dots.forEach((dot, i) => {
          dot.classList.toggle("active", i === slideIndex);
        });
      }

      function showSlide(index) {
          if (!slides || slides.length === 0) return; // Ne rien faire s'il n'y a pas de slides

        if (index >= slides.length) {
          slideIndex = 0;
        } else if (index < 0) {
          slideIndex = slides.length - 1;
        } else {
          slideIndex = index;
        }
         // Le calcul de la transformation change car chaque image fait 20% de la largeur de #slider
         const slideWidthPercentage = 100 / slides.length;
         slider.style.transform = `translateX(-${slideIndex * slideWidthPercentage}%)`;
        updateDots();
      }

      function nextSlide() {
        showSlide(slideIndex + 1);
      }

      function startSlider() {
         if (!slides || slides.length <= 1) return; // Ne pas démarrer si 0 ou 1 slide
        clearInterval(slideInterval); // Arrêter l'intervalle précédent
        slideInterval = setInterval(nextSlide, slideDuration);
      }

       // Fonction pour changer de slide manuellement (appelée par les points)
       // Doit être globale ou attachée à window si appelée via `onclick` HTML
       window.currentSlide = function(n) {
           if (!slides || slides.length <= 1) return;
          clearInterval(slideInterval);
          showSlide(n); // n est directement l'index (0-based)
          startSlider(); // Redémarrer le timer après clic manuel
       }

      // Initialisation du slider
      createDots();
      showSlide(slideIndex); // Afficher la première slide
      startSlider(); // Démarrer le défilement automatique

      // --- Logique d'Animation au Défilement ---
      const scrollElements = document.querySelectorAll(".animate-on-scroll");

      const elementInView = (el, dividend = 1) => {
        const elementTop = el.getBoundingClientRect().top;
        // Déclenche un peu avant que l'élément soit complètement visible
        return (
          elementTop <= (window.innerHeight || document.documentElement.clientHeight) / dividend
        );
      };

      const displayScrollElement = (element) => {
        element.classList.add("is-visible");
      };

      const hideScrollElement = (element) => {
        element.classList.remove("is-visible"); // Optionnel: pour ré-animer si on remonte
      };

      const handleScrollAnimation = () => {
        scrollElements.forEach((el) => {
          if (elementInView(el, 1.15)) { // Déclenche quand 15% du bas de l'élément est visible
            displayScrollElement(el);
          }
           // else { // Optionnel: décommenter pour cacher quand ça sort de la vue par le haut
           //   hideScrollElement(el);
           // }
        });
      }

      // Écouteur d'événement pour le défilement
      window.addEventListener("scroll", handleScrollAnimation);
      // Appel initial pour vérifier les éléments déjà visibles au chargement
      handleScrollAnimation();


      // --- Logique du Lien de Téléchargement Conditionnel ---
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      const navElement = document.querySelector("nav");
      let downloadLink = null;

      // !! IMPORTANT !! Remplacez par vos vrais liens App Store et Play Store
      const appStoreUrl = "https://apps.apple.com/VOTRE_LIEN_APP_STORE";
      const playStoreUrl = "https://play.google.com/store/apps/details?id=VOTRE_ID_APPLICATION";

      // Détection iOS (iPhone, iPad, iPod)
      if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
        downloadLink = document.createElement("a");
        downloadLink.href = appStoreUrl;
        downloadLink.textContent = "Télécharger sur l'App Store";
        downloadLink.id = "download-app-link"; // ID pour un style spécifique si besoin
        downloadLink.target = "_blank"; // Ouvre dans un nouvel onglet/store
        downloadLink.rel = "noopener noreferrer";
      }
      // Détection Android
      else if (/android/i.test(userAgent)) {
        downloadLink = document.createElement("a");
        downloadLink.href = playStoreUrl;
        downloadLink.textContent = "Disponible sur Google Play";
        downloadLink.id = "download-app-link"; // ID pour un style spécifique si besoin
        downloadLink.target = "_blank"; // Ouvre dans un nouvel onglet/store
        downloadLink.rel = "noopener noreferrer";
      }

      // Ajouter le lien à la navigation s'il a été créé
      if (downloadLink && navElement) {
        // Ajouter un style spécifique au lien de téléchargement si besoin
        // downloadLink.style.fontWeight = 'bold';
        // downloadLink.style.marginLeft = '15px';
        // etc.
        // Ou utiliser l'ID #download-app-link dans le CSS

        navElement.appendChild(downloadLink);
      }

    }); // Fin de DOMContentLoaded
  </script>
  </body>
</html>
